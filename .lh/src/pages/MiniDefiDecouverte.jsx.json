{
    "sourceFile": "src/pages/MiniDefiDecouverte.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1750871708897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750875551459,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,26 @@\n // src/pages/MiniDefiDecouverte.jsx\r\n-import React, { useState } from 'react';\r\n+import React, { useState, useEffect } from 'react';\r\n+import { useNavigate } from 'react-router-dom';\r\n import Layout from '../components/commun/Layout';\r\n \r\n const MiniDefiDecouverte = () => {\r\n   const [etape, setEtape] = useState(1);\r\n+  const [termine, setTermine] = useState(false);\r\n+  const navigate = useNavigate();\r\n \r\n+  useEffect(() => {\r\n+    if (termine) {\r\n+      const timer = setTimeout(() => {\r\n+        navigate('/ressources');\r\n+      }, 5000);\r\n+      return () => clearTimeout(timer);\r\n+    }\r\n+  }, [termine, navigate]);\r\n+\r\n   const nextStep = () => {\r\n-    setEtape(prev => Math.min(prev + 1, 3));\r\n+    if (etape === 3) setTermine(true);\r\n+    else setEtape(prev => prev + 1);\r\n   };\r\n \r\n   const prevStep = () => {\r\n     setEtape(prev => Math.max(prev - 1, 1));\r\n@@ -16,50 +29,61 @@\n   return (\r\n     <Layout>\r\n       <div className=\"max-w-3xl mx-auto p-6\">\r\n         <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi DÃ©couverte</h1>\r\n-        {etape === 1 && (\r\n-          <div>\r\n-            <p>Bienvenue dans ce mini dÃ©fi dÃ©couverte. PremiÃ¨re Ã©tape : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n-            <button\r\n-              onClick={nextStep}\r\n-              className=\"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n-            >\r\n-              Ã‰tape suivante\r\n-            </button>\r\n-          </div>\r\n+        {!termine ? (\r\n+          <>\r\n+            {etape === 1 && (\r\n+              <div>\r\n+                <p>Bienvenue dans ce mini dÃ©fi dÃ©couverte. PremiÃ¨re Ã©tape : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n+                <button\r\n+                  onClick={nextStep}\r\n+                  className=\"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n+                >\r\n+                  Suivant\r\n+                </button>\r\n+              </div>\r\n+            )}\r\n+            {etape === 2 && (\r\n+              <div>\r\n+                <p>DeuxiÃ¨me Ã©tape : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n+                <div className=\"mt-4\">\r\n+                  <button\r\n+                    onClick={prevStep}\r\n+                    className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n+                  >\r\n+                    PrÃ©cÃ©dent\r\n+                  </button>\r\n+                  <button\r\n+                    onClick={nextStep}\r\n+                    className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n+                  >\r\n+                    Suivant\r\n+                  </button>\r\n+                </div>\r\n+              </div>\r\n+            )}\r\n+            {etape === 3 && (\r\n+              <div>\r\n+                <p>TroisiÃ¨me Ã©tape : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n+                <div className=\"mt-4\">\r\n+                  <button\r\n+                    onClick={prevStep}\r\n+                    className=\"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n+                  >\r\n+                    PrÃ©cÃ©dent\r\n+                  </button>\r\n+                </div>\r\n+              </div>\r\n+            )}\r\n+          </>\r\n+        ) : (\r\n+          <p className=\"text-green-600 font-semibold animate-pulse\">\r\n+            ğŸ‰ FÃ©licitations ! Vous avez complÃ©tÃ© le mini dÃ©fi. Redirection vers les ressources...\r\n+          </p>\r\n         )}\r\n-        {etape === 2 && (\r\n-          <div>\r\n-            <p>DeuxiÃ¨me Ã©tape : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n-            <button\r\n-              onClick={prevStep}\r\n-              className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n-            >\r\n-              PrÃ©cÃ©dent\r\n-            </button>\r\n-            <button\r\n-              onClick={nextStep}\r\n-              className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n-            >\r\n-              Ã‰tape suivante\r\n-            </button>\r\n-          </div>\r\n-        )}\r\n-        {etape === 3 && (\r\n-          <div>\r\n-            <p>DerniÃ¨re Ã©tape : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n-            <button\r\n-              onClick={prevStep}\r\n-              className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n-            >\r\n-              PrÃ©cÃ©dent\r\n-            </button>\r\n-            <p className=\"mt-4 font-semibold text-green-600\">Bravo pour avoir complÃ©tÃ© ce mini dÃ©fi ! ğŸ‰</p>\r\n-          </div>\r\n-        )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n };\r\n \r\n-export default MiniDefiDecouverte;\r\n+export default MiniDefiDecouverte;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1750876110130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,10 @@\n-// src/pages/MiniDefiDecouverte.jsx\r\n+// ğŸ“„ src/pages/MiniDefiDecouverte.jsx\r\n import React, { useState, useEffect } from 'react';\r\n import { useNavigate } from 'react-router-dom';\r\n import Layout from '../components/commun/Layout';\r\n+import { ArrowRight, ArrowLeft, CheckCircle } from 'lucide-react';\r\n+import { motion } from 'framer-motion';\r\n \r\n const MiniDefiDecouverte = () => {\r\n   const [etape, setEtape] = useState(1);\r\n   const [termine, setTermine] = useState(false);\r\n@@ -27,63 +29,68 @@\n   };\r\n \r\n   return (\r\n     <Layout>\r\n-      <div className=\"max-w-3xl mx-auto p-6\">\r\n-        <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi DÃ©couverte</h1>\r\n+      <div className=\"max-w-3xl mx-auto p-6 bg-white/80 shadow-xl rounded-2xl mt-10\">\r\n+        <h1 className=\"text-4xl font-bold mb-6 text-indigo-700\">ğŸ” Mini DÃ©fi DÃ©couverte</h1>\r\n         {!termine ? (\r\n-          <>\r\n+          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\r\n             {etape === 1 && (\r\n               <div>\r\n-                <p>Bienvenue dans ce mini dÃ©fi dÃ©couverte. PremiÃ¨re Ã©tape : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n+                <p className=\"text-gray-700 text-lg\">Ã‰tape 1 : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n                 <button\r\n                   onClick={nextStep}\r\n-                  className=\"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n+                  className=\"mt-4 flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n                 >\r\n-                  Suivant\r\n+                  Suivant <ArrowRight className=\"w-4 h-4\" />\r\n                 </button>\r\n               </div>\r\n             )}\r\n             {etape === 2 && (\r\n               <div>\r\n-                <p>DeuxiÃ¨me Ã©tape : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n-                <div className=\"mt-4\">\r\n+                <p className=\"text-gray-700 text-lg\">Ã‰tape 2 : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n+                <div className=\"mt-4 flex gap-3\">\r\n                   <button\r\n                     onClick={prevStep}\r\n-                    className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n+                    className=\"flex items-center gap-2 px-5 py-2 bg-gray-300 rounded-full hover:bg-gray-400\"\r\n                   >\r\n-                    PrÃ©cÃ©dent\r\n+                    <ArrowLeft className=\"w-4 h-4\" /> PrÃ©cÃ©dent\r\n                   </button>\r\n                   <button\r\n                     onClick={nextStep}\r\n-                    className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n+                    className=\"flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n                   >\r\n-                    Suivant\r\n+                    Suivant <ArrowRight className=\"w-4 h-4\" />\r\n                   </button>\r\n                 </div>\r\n               </div>\r\n             )}\r\n             {etape === 3 && (\r\n               <div>\r\n-                <p>TroisiÃ¨me Ã©tape : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n+                <p className=\"text-gray-700 text-lg\">Ã‰tape 3 : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n                 <div className=\"mt-4\">\r\n                   <button\r\n                     onClick={prevStep}\r\n-                    className=\"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n+                    className=\"flex items-center gap-2 px-5 py-2 bg-gray-300 rounded-full hover:bg-gray-400\"\r\n                   >\r\n-                    PrÃ©cÃ©dent\r\n+                    <ArrowLeft className=\"w-4 h-4\" /> PrÃ©cÃ©dent\r\n                   </button>\r\n\\ No newline at end of file\n                 </div>\r\n               </div>\r\n             )}\r\n-          </>\r\n+          </motion.div>\r\n         ) : (\r\n-          <p className=\"text-green-600 font-semibold animate-pulse\">\r\n+          <motion.p\r\n+            className=\"text-green-600 font-semibold text-lg animate-pulse\"\r\n+            initial={{ opacity: 0 }}\r\n+            animate={{ opacity: 1 }}\r\n+          >\r\n             ğŸ‰ FÃ©licitations ! Vous avez complÃ©tÃ© le mini dÃ©fi. Redirection vers les ressources...\r\n-          </p>\r\n+          </motion.p>\r\n         )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n };\r\n \r\n-export default MiniDefiDecouverte;\n+export default MiniDefiDecouverte;\r\n+\r\n"
                },
                {
                    "date": 1750876753603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,92 +1,118 @@\n-// ğŸ“„ src/pages/MiniDefiDecouverte.jsx\r\n import React, { useState, useEffect } from 'react';\r\n import { useNavigate } from 'react-router-dom';\r\n import Layout from '../components/commun/Layout';\r\n-import { ArrowRight, ArrowLeft, CheckCircle } from 'lucide-react';\r\n+import { ArrowRight, ArrowLeft, CheckCircle, RefreshCcw } from 'lucide-react';\r\n import { motion } from 'framer-motion';\r\n \r\n+const etapes = [\r\n+  {\r\n+    titre: 'Ã‰tape 1',\r\n+    texte: 'Respirez profondÃ©ment pendant 2 minutes.',\r\n+  },\r\n+  {\r\n+    titre: 'Ã‰tape 2',\r\n+    texte: 'Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourdâ€™hui.',\r\n+  },\r\n+  {\r\n+    titre: 'Ã‰tape 3',\r\n+    texte: 'Faites une marche de 5 minutes Ã  lâ€™extÃ©rieur.',\r\n+  },\r\n+];\r\n+\r\n const MiniDefiDecouverte = () => {\r\n-  const [etape, setEtape] = useState(1);\r\n+  const [etape, setEtape] = useState(0);\r\n   const [termine, setTermine] = useState(false);\r\n+  const [reflexion, setReflexion] = useState('');\r\n   const navigate = useNavigate();\r\n \r\n   useEffect(() => {\r\n+    const savedEtape = localStorage.getItem('miniDefiDecouverteEtape');\r\n+    const savedTermine = localStorage.getItem('miniDefiDecouverteTermine');\r\n+    if (savedEtape) setEtape(Number(savedEtape));\r\n+    if (savedTermine === 'true') setTermine(true);\r\n+  }, []);\r\n+\r\n+  useEffect(() => {\r\n     if (termine) {\r\n       const timer = setTimeout(() => {\r\n         navigate('/ressources');\r\n       }, 5000);\r\n       return () => clearTimeout(timer);\r\n     }\r\n   }, [termine, navigate]);\r\n \r\n-  const nextStep = () => {\r\n-    if (etape === 3) setTermine(true);\r\n-    else setEtape(prev => prev + 1);\r\n+  const suivant = () => {\r\n+    if (etape + 1 < etapes.length) {\r\n+      setEtape(prev => prev + 1);\r\n+      localStorage.setItem('miniDefiDecouverteEtape', etape + 1);\r\n+      setReflexion('');\r\n+    } else {\r\n+      setTermine(true);\r\n+      localStorage.setItem('miniDefiDecouverteTermine', 'true');\r\n+    }\r\n   };\r\n \r\n-  const prevStep = () => {\r\n-    setEtape(prev => Math.max(prev - 1, 1));\r\n+  const precedent = () => {\r\n+    setEtape(prev => Math.max(prev - 1, 0));\r\n   };\r\n \r\n+  const reset = () => {\r\n+    setEtape(0);\r\n+    setReflexion('');\r\n+    setTermine(false);\r\n+    localStorage.removeItem('miniDefiDecouverteEtape');\r\n+    localStorage.removeItem('miniDefiDecouverteTermine');\r\n+  };\r\n+\r\n   return (\r\n     <Layout>\r\n       <div className=\"max-w-3xl mx-auto p-6 bg-white/80 shadow-xl rounded-2xl mt-10\">\r\n-        <h1 className=\"text-4xl font-bold mb-6 text-indigo-700\">ğŸ” Mini DÃ©fi DÃ©couverte</h1>\r\n+        <h1 className=\"text-4xl font-bold mb-6 text-indigo-700\">ğŸ” Mini DÃ©fi DÃ©couverte - {etapes[etape].titre}</h1>\r\n         {!termine ? (\r\n           <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\r\n-            {etape === 1 && (\r\n-              <div>\r\n-                <p className=\"text-gray-700 text-lg\">Ã‰tape 1 : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n+            <p className=\"text-gray-700 text-lg mb-4\">{etapes[etape].texte}</p>\r\n+\r\n+            <label className=\"block text-sm font-medium text-gray-700 mb-1\">ğŸ“ Votre ressenti :</label>\r\n+            <textarea\r\n+              className=\"w-full p-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 mb-4\"\r\n+              value={reflexion}\r\n+              onChange={(e) => setReflexion(e.target.value)}\r\n+              rows={3}\r\n+            />\r\n+\r\n+            <div className=\"flex gap-3\">\r\n+              {etape > 0 && (\r\n                 <button\r\n-                  onClick={nextStep}\r\n-                  className=\"mt-4 flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n+                  onClick={precedent}\r\n+                  className=\"flex items-center gap-2 px-4 py-2 bg-gray-300 rounded-full hover:bg-gray-400\"\r\n                 >\r\n-                  Suivant <ArrowRight className=\"w-4 h-4\" />\r\n+                  <ArrowLeft className=\"w-4 h-4\" /> PrÃ©cÃ©dent\r\n                 </button>\r\n-              </div>\r\n-            )}\r\n-            {etape === 2 && (\r\n-              <div>\r\n-                <p className=\"text-gray-700 text-lg\">Ã‰tape 2 : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n-                <div className=\"mt-4 flex gap-3\">\r\n-                  <button\r\n-                    onClick={prevStep}\r\n-                    className=\"flex items-center gap-2 px-5 py-2 bg-gray-300 rounded-full hover:bg-gray-400\"\r\n-                  >\r\n-                    <ArrowLeft className=\"w-4 h-4\" /> PrÃ©cÃ©dent\r\n-                  </button>\r\n-                  <button\r\n-                    onClick={nextStep}\r\n-                    className=\"flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n-                  >\r\n-                    Suivant <ArrowRight className=\"w-4 h-4\" />\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-            )}\r\n-            {etape === 3 && (\r\n-              <div>\r\n-                <p className=\"text-gray-700 text-lg\">Ã‰tape 3 : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n-                <div className=\"mt-4\">\r\n-                  <button\r\n-                    onClick={prevStep}\r\n-                    className=\"flex items-center gap-2 px-5 py-2 bg-gray-300 rounded-full hover:bg-gray-400\"\r\n-                  >\r\n-                    <ArrowLeft className=\"w-4 h-4\" /> PrÃ©cÃ©dent\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-            )}\r\n+              )}\r\n+              <button\r\n+                onClick={suivant}\r\n+                className=\"flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n+              >\r\n+                <CheckCircle className=\"w-5 h-5\" />\r\n+                {etape === etapes.length - 1 ? 'Terminer' : 'Suivant'}\r\n+              </button>\r\n+            </div>\r\n           </motion.div>\r\n         ) : (\r\n-          <motion.p\r\n+          <motion.div\r\n             className=\"text-green-600 font-semibold text-lg animate-pulse\"\r\n             initial={{ opacity: 0 }}\r\n             animate={{ opacity: 1 }}\r\n           >\r\n-            ğŸ‰ FÃ©licitations ! Vous avez complÃ©tÃ© le mini dÃ©fi. Redirection vers les ressources...\r\n-          </motion.p>\r\n+            ğŸ‰ Vous avez complÃ©tÃ© le dÃ©fi dÃ©couverte ! Redirection en cours...\r\n+            <button\r\n+              onClick={reset}\r\n+              className=\"mt-4 flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-full hover:bg-indigo-100\"\r\n+            >\r\n+              <RefreshCcw className=\"w-4 h-4\" /> Refaire le dÃ©fi\r\n+            </button>\r\n+          </motion.div>\r\n         )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n"
                }
            ],
            "date": 1750871708897,
            "name": "Commit-0",
            "content": "// src/pages/MiniDefiDecouverte.jsx\r\nimport React, { useState } from 'react';\r\nimport Layout from '../components/commun/Layout';\r\n\r\nconst MiniDefiDecouverte = () => {\r\n  const [etape, setEtape] = useState(1);\r\n\r\n  const nextStep = () => {\r\n    setEtape(prev => Math.min(prev + 1, 3));\r\n  };\r\n\r\n  const prevStep = () => {\r\n    setEtape(prev => Math.max(prev - 1, 1));\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"max-w-3xl mx-auto p-6\">\r\n        <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi DÃ©couverte</h1>\r\n        {etape === 1 && (\r\n          <div>\r\n            <p>Bienvenue dans ce mini dÃ©fi dÃ©couverte. PremiÃ¨re Ã©tape : Respirez profondÃ©ment pendant 2 minutes.</p>\r\n            <button\r\n              onClick={nextStep}\r\n              className=\"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n            >\r\n              Ã‰tape suivante\r\n            </button>\r\n          </div>\r\n        )}\r\n        {etape === 2 && (\r\n          <div>\r\n            <p>DeuxiÃ¨me Ã©tape : Ã‰crivez trois choses pour lesquelles vous Ãªtes reconnaissant aujourd'hui.</p>\r\n            <button\r\n              onClick={prevStep}\r\n              className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n            >\r\n              PrÃ©cÃ©dent\r\n            </button>\r\n            <button\r\n              onClick={nextStep}\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n            >\r\n              Ã‰tape suivante\r\n            </button>\r\n          </div>\r\n        )}\r\n        {etape === 3 && (\r\n          <div>\r\n            <p>DerniÃ¨re Ã©tape : Faites une courte marche de 5 minutes Ã  lâ€™extÃ©rieur.</p>\r\n            <button\r\n              onClick={prevStep}\r\n              className=\"mr-3 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400\"\r\n            >\r\n              PrÃ©cÃ©dent\r\n            </button>\r\n            <p className=\"mt-4 font-semibold text-green-600\">Bravo pour avoir complÃ©tÃ© ce mini dÃ©fi ! ğŸ‰</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MiniDefiDecouverte;\r\n"
        }
    ]
}
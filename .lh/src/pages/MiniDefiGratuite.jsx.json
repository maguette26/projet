{
    "sourceFile": "src/pages/MiniDefiGratuite.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1750871631047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750873168061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,27 +1,45 @@\n-// src/pages/MiniDefiGratuite.jsx\r\n-import React, { useState } from 'react';\r\n+import React, { useState, useEffect } from 'react';\r\n import Layout from '../components/commun/Layout';\r\n \r\n const MiniDefiGratuite = () => {\r\n   const [termine, setTermine] = useState(false);\r\n \r\n+  // Charge l'Ã©tat du localStorage au montage\r\n+  useEffect(() => {\r\n+    const done = localStorage.getItem('miniDefiGratuiteTermine');\r\n+    if (done === 'true') setTermine(true);\r\n+  }, []);\r\n+\r\n+  const handleTerminer = () => {\r\n+    setTermine(true);\r\n+    localStorage.setItem('miniDefiGratuiteTermine', 'true');\r\n+  };\r\n+\r\n   return (\r\n     <Layout>\r\n       <div className=\"max-w-3xl mx-auto p-6\">\r\n         <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi Gratuit</h1>\r\n         {!termine ? (\r\n           <>\r\n             <p>Voici un mini dÃ©fi pour amÃ©liorer votre bien-Ãªtre : chaque jour, prenez 5 minutes pour mÃ©diter ou respirer profondÃ©ment.</p>\r\n             <button\r\n-              onClick={() => setTermine(true)}\r\n+              onClick={handleTerminer}\r\n               className=\"mt-6 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n             >\r\n               J'ai terminÃ© ce dÃ©fi !\r\n             </button>\r\n           </>\r\n         ) : (\r\n-          <p className=\"text-green-600 font-semibold\">Bravo pour avoir terminÃ© le mini dÃ©fi ! ğŸ‰</p>\r\n+          <>\r\n+            <p className=\"text-green-600 font-semibold animate-pulse\">Bravo pour avoir terminÃ© le mini dÃ©fi ! ğŸ‰</p>\r\n+            <button\r\n+              onClick={() => setTermine(false)}\r\n+              className=\"mt-4 px-4 py-2 border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-100\"\r\n+            >\r\n+              Refaire le dÃ©fi\r\n+            </button>\r\n+          </>\r\n         )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n"
                },
                {
                    "date": 1750875421206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,27 @@\n+// src/pages/MiniDefiGratuite.jsx\r\n import React, { useState, useEffect } from 'react';\r\n+import { useNavigate } from 'react-router-dom';\r\n import Layout from '../components/commun/Layout';\r\n \r\n const MiniDefiGratuite = () => {\r\n   const [termine, setTermine] = useState(false);\r\n+  const navigate = useNavigate();\r\n \r\n-  // Charge l'Ã©tat du localStorage au montage\r\n   useEffect(() => {\r\n     const done = localStorage.getItem('miniDefiGratuiteTermine');\r\n     if (done === 'true') setTermine(true);\r\n   }, []);\r\n \r\n+  useEffect(() => {\r\n+    if (termine) {\r\n+      const timer = setTimeout(() => {\r\n+        navigate('/ressources');\r\n+      }, 4000);\r\n+      return () => clearTimeout(timer);\r\n+    }\r\n+  }, [termine, navigate]);\r\n+\r\n   const handleTerminer = () => {\r\n     setTermine(true);\r\n     localStorage.setItem('miniDefiGratuiteTermine', 'true');\r\n   };\r\n@@ -20,29 +31,39 @@\n       <div className=\"max-w-3xl mx-auto p-6\">\r\n         <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi Gratuit</h1>\r\n         {!termine ? (\r\n           <>\r\n-            <p>Voici un mini dÃ©fi pour amÃ©liorer votre bien-Ãªtre : chaque jour, prenez 5 minutes pour mÃ©diter ou respirer profondÃ©ment.</p>\r\n+            <p className=\"mb-4 text-gray-800\">Voici un mini dÃ©fi pour amÃ©liorer votre bien-Ãªtre : chaque jour, prenez 5 minutes pour mÃ©diter ou respirer profondÃ©ment.</p>\r\n+            <ul className=\"list-disc pl-6 text-gray-700\">\r\n+              <li>Jour 1 : Respiration profonde 5 minutes</li>\r\n+              <li>Jour 2 : Se dÃ©connecter des Ã©crans 10 minutes</li>\r\n+              <li>Jour 3 : Boire un grand verre d'eau au rÃ©veil</li>\r\n+            </ul>\r\n             <button\r\n               onClick={handleTerminer}\r\n               className=\"mt-6 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n             >\r\n-              J'ai terminÃ© ce dÃ©fi !\r\n+              âœ… J'ai terminÃ© ce dÃ©fi !\r\n             </button>\r\n           </>\r\n         ) : (\r\n           <>\r\n-            <p className=\"text-green-600 font-semibold animate-pulse\">Bravo pour avoir terminÃ© le mini dÃ©fi ! ğŸ‰</p>\r\n+            <p className=\"text-green-600 font-semibold animate-pulse\">\r\n+              ğŸ‰ Bravo pour avoir terminÃ© le mini dÃ©fi ! Redirection vers les ressources...\r\n+            </p>\r\n             <button\r\n-              onClick={() => setTermine(false)}\r\n+              onClick={() => {\r\n+                setTermine(false);\r\n+                localStorage.removeItem('miniDefiGratuiteTermine');\r\n+              }}\r\n               className=\"mt-4 px-4 py-2 border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-100\"\r\n             >\r\n-              Refaire le dÃ©fi\r\n+              ğŸ”„ Refaire le dÃ©fi\r\n             </button>\r\n           </>\r\n         )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n };\r\n \r\n-export default MiniDefiGratuite;\r\n+export default MiniDefiGratuite;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1750876370439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,69 +1,116 @@\n-// src/pages/MiniDefiGratuite.jsx\r\n+// ğŸ“„ src/pages/MiniDefiGratuite.jsx (version avec progression sur 3 jours + journal)\r\n import React, { useState, useEffect } from 'react';\r\n import { useNavigate } from 'react-router-dom';\r\n import Layout from '../components/commun/Layout';\r\n+import { CheckCircle, RefreshCcw } from 'lucide-react';\r\n+import { motion } from 'framer-motion';\r\n \r\n+const defis = [\r\n+  {\r\n+    titre: 'Jour 1',\r\n+    texte: 'Faites 5 minutes de respiration profonde.',\r\n+  },\r\n+  {\r\n+    titre: 'Jour 2',\r\n+    texte: 'DÃ©connectez-vous des Ã©crans pendant 10 minutes.',\r\n+  },\r\n+  {\r\n+    titre: 'Jour 3',\r\n+    texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n+  },\r\n+];\r\n+\r\n const MiniDefiGratuite = () => {\r\n+  const [jourActuel, setJourActuel] = useState(0);\r\n   const [termine, setTermine] = useState(false);\r\n+  const [reflexion, setReflexion] = useState('');\r\n   const navigate = useNavigate();\r\n \r\n   useEffect(() => {\r\n-    const done = localStorage.getItem('miniDefiGratuiteTermine');\r\n-    if (done === 'true') setTermine(true);\r\n+    const savedDay = localStorage.getItem('miniDefiJour');\r\n+    const savedTermine = localStorage.getItem('miniDefiGratuiteTermine');\r\n+    if (savedDay) setJourActuel(Number(savedDay));\r\n+    if (savedTermine === 'true') setTermine(true);\r\n   }, []);\r\n \r\n   useEffect(() => {\r\n     if (termine) {\r\n       const timer = setTimeout(() => {\r\n         navigate('/ressources');\r\n-      }, 4000);\r\n+      }, 5000);\r\n       return () => clearTimeout(timer);\r\n     }\r\n   }, [termine, navigate]);\r\n \r\n-  const handleTerminer = () => {\r\n-    setTermine(true);\r\n-    localStorage.setItem('miniDefiGratuiteTermine', 'true');\r\n+  const handleSuivant = () => {\r\n+    if (jourActuel + 1 < defis.length) {\r\n+      setJourActuel((prev) => prev + 1);\r\n+      localStorage.setItem('miniDefiJour', jourActuel + 1);\r\n+      setReflexion('');\r\n+    } else {\r\n+      setTermine(true);\r\n+      localStorage.setItem('miniDefiGratuiteTermine', 'true');\r\n+    }\r\n   };\r\n \r\n+  const handleReset = () => {\r\n+    setJourActuel(0);\r\n+    setReflexion('');\r\n+    setTermine(false);\r\n+    localStorage.removeItem('miniDefiJour');\r\n+    localStorage.removeItem('miniDefiGratuiteTermine');\r\n+  };\r\n\\ No newline at end of file\n+\r\n   return (\r\n     <Layout>\r\n-      <div className=\"max-w-3xl mx-auto p-6\">\r\n-        <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi Gratuit</h1>\r\n+      <div className=\"max-w-3xl mx-auto p-6 bg-white/80 shadow-2xl rounded-2xl mt-10\">\r\n+        <h1 className=\"text-4xl font-bold mb-6 text-indigo-700\">ğŸ“… Mini DÃ©fi Gratuit - Jour {jourActuel + 1}</h1>\r\n         {!termine ? (\r\n-          <>\r\n-            <p className=\"mb-4 text-gray-800\">Voici un mini dÃ©fi pour amÃ©liorer votre bien-Ãªtre : chaque jour, prenez 5 minutes pour mÃ©diter ou respirer profondÃ©ment.</p>\r\n-            <ul className=\"list-disc pl-6 text-gray-700\">\r\n-              <li>Jour 1 : Respiration profonde 5 minutes</li>\r\n-              <li>Jour 2 : Se dÃ©connecter des Ã©crans 10 minutes</li>\r\n-              <li>Jour 3 : Boire un grand verre d'eau au rÃ©veil</li>\r\n-            </ul>\r\n+          <motion.div\r\n+            initial={{ opacity: 0, y: 20 }}\r\n+            animate={{ opacity: 1, y: 0 }}\r\n+            className=\"space-y-4\"\r\n+          >\r\n+            <p className=\"text-lg text-gray-800\">{defis[jourActuel].texte}</p>\r\n+            <div>\r\n+              <label htmlFor=\"reflexion\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n+                ğŸ“ Quâ€™avez-vous ressenti aprÃ¨s ce dÃ©fi ?\r\n+              </label>\r\n+              <textarea\r\n+                id=\"reflexion\"\r\n+                value={reflexion}\r\n+                onChange={(e) => setReflexion(e.target.value)}\r\n+                className=\"w-full p-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400\"\r\n+                rows={3}\r\n+              ></textarea>\r\n+            </div>\r\n             <button\r\n-              onClick={handleTerminer}\r\n-              className=\"mt-6 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n+              onClick={handleSuivant}\r\n+              className=\"mt-4 flex items-center gap-2 px-5 py-3 bg-indigo-600 text-white rounded-full hover:bg-indigo-700\"\r\n             >\r\n-              âœ… J'ai terminÃ© ce dÃ©fi !\r\n+              <CheckCircle className=\"w-5 h-5\" />\r\n+              Valider et passer au jour suivant\r\n             </button>\r\n-          </>\r\n+          </motion.div>\r\n         ) : (\r\n-          <>\r\n-            <p className=\"text-green-600 font-semibold animate-pulse\">\r\n-              ğŸ‰ Bravo pour avoir terminÃ© le mini dÃ©fi ! Redirection vers les ressources...\r\n-            </p>\r\n+          <motion.div\r\n+            className=\"text-green-600 font-semibold text-lg animate-pulse\"\r\n+            initial={{ opacity: 0 }}\r\n+            animate={{ opacity: 1 }}\r\n+          >\r\n+            ğŸ‰ Bravo ! Vous avez complÃ©tÃ© les 3 jours du dÃ©fi. Redirection vers les ressources...\r\n             <button\r\n-              onClick={() => {\r\n-                setTermine(false);\r\n-                localStorage.removeItem('miniDefiGratuiteTermine');\r\n-              }}\r\n-              className=\"mt-4 px-4 py-2 border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-100\"\r\n+              onClick={handleReset}\r\n+              className=\"mt-4 flex items-center gap-2 px-4 py-2 border border-indigo-600 text-indigo-600 rounded-full hover:bg-indigo-100\"\r\n             >\r\n-              ğŸ”„ Refaire le dÃ©fi\r\n+              <RefreshCcw className=\"w-4 h-4\" />\r\n+              Recommencer le dÃ©fi\r\n             </button>\r\n-          </>\r\n+          </motion.div>\r\n         )}\r\n       </div>\r\n     </Layout>\r\n   );\r\n };\r\n \r\n-export default MiniDefiGratuite;\n+export default MiniDefiGratuite;\r\n"
                },
                {
                    "date": 1750876472485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,20 @@\n   {\r\n     titre: 'Jour 3',\r\n     texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n   },\r\n+   {\r\n+    titre: 'Jour 1',\r\n+    texte: 'Faites 5 minutes de respiration profonde.',\r\n+  },\r\n+  {\r\n+    titre: 'Jour 2',\r\n+    texte: 'DÃ©connectez-vous des Ã©crans pendant 10 minutes.',\r\n+  },\r\n+  {\r\n+    titre: 'Jour 3',\r\n+    texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n+  },\r\n ];\r\n \r\n const MiniDefiGratuite = () => {\r\n   const [jourActuel, setJourActuel] = useState(0);\r\n@@ -112,5 +124,5 @@\n     </Layout>\r\n   );\r\n };\r\n \r\n-export default MiniDefiGratuite;\n\\ No newline at end of file\n+export default MiniDefiGratuite;\r\n"
                },
                {
                    "date": 1750876480034,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     titre: 'Jour 3',\r\n     texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n   },\r\n    {\r\n-    titre: 'Jour 1',\r\n+    titre: 'Jour 4',\r\n     texte: 'Faites 5 minutes de respiration profonde.',\r\n   },\r\n   {\r\n     titre: 'Jour 2',\r\n"
                },
                {
                    "date": 1750876485612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n     titre: 'Jour 5',\r\n     texte: 'DÃ©connectez-vous des Ã©crans pendant 10 minutes.',\r\n   },\r\n   {\r\n-    titre: 'Jour 3',\r\n+    titre: 'Jour 6',\r\n     texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n   },\r\n ];\r\n \r\n"
                },
                {
                    "date": 1750876546530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     texte: 'Faites 5 minutes de respiration profonde.',\r\n   },\r\n   {\r\n     titre: 'Jour 5',\r\n-    texte: 'DÃ©connectez-vous des Ã©crans pendant 10 minutes.',\r\n+    texte: 'Lisez u.',\r\n   },\r\n   {\r\n     titre: 'Jour 6',\r\n     texte: 'Buvez un grand verre dâ€™eau au rÃ©veil.',\r\n"
                }
            ],
            "date": 1750871631047,
            "name": "Commit-0",
            "content": "// src/pages/MiniDefiGratuite.jsx\r\nimport React, { useState } from 'react';\r\nimport Layout from '../components/commun/Layout';\r\n\r\nconst MiniDefiGratuite = () => {\r\n  const [termine, setTermine] = useState(false);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"max-w-3xl mx-auto p-6\">\r\n        <h1 className=\"text-3xl font-bold mb-6\">Mini DÃ©fi Gratuit</h1>\r\n        {!termine ? (\r\n          <>\r\n            <p>Voici un mini dÃ©fi pour amÃ©liorer votre bien-Ãªtre : chaque jour, prenez 5 minutes pour mÃ©diter ou respirer profondÃ©ment.</p>\r\n            <button\r\n              onClick={() => setTermine(true)}\r\n              className=\"mt-6 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n            >\r\n              J'ai terminÃ© ce dÃ©fi !\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <p className=\"text-green-600 font-semibold\">Bravo pour avoir terminÃ© le mini dÃ©fi ! ğŸ‰</p>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MiniDefiGratuite;\r\n"
        }
    ]
}
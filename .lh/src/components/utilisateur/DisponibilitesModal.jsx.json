{
    "sourceFile": "src/components/utilisateur/DisponibilitesModal.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1750347993723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750348451796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,21 @@\n-// src/components/utilisateur/DisponibilitesModal.jsx\r\n import React from 'react';\r\n import { CalendarCheck, Clock } from 'lucide-react';\r\n \r\n const DisponibilitesModal = ({ pro, disponibilites, genererSousCreneaux, onReserver, onPayer, onClose }) => {\r\n   return (\r\n     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\r\n-      <div className=\"bg-white p-6 rounded-md max-w-3xl w-full max-h-[80vh] overflow-y-auto shadow-xl\">\r\n+      <div className=\"relative bg-white p-6 rounded-md max-w-3xl w-full max-h-[80vh] overflow-y-auto shadow-xl\">\r\n+        <button\r\n+          onClick={onClose}\r\n+          className=\"absolute top-3 right-3 text-gray-500 hover:text-red-600 text-lg font-bold\"\r\n+        >\r\n+          ✖\r\n+        </button>\r\n+\r\n         <h3 className=\"text-2xl font-bold mb-4 text-center\">\r\n           Créneaux pour {pro.prenom} {pro.nom}\r\n         </h3>\r\n-        <button onClick={onClose} className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-800\">\r\n-          ✖\r\n-        </button>\r\n \r\n         {disponibilites.length === 0 ? (\r\n           <p className=\"text-gray-600 text-center\">Aucune disponibilité trouvée.</p>\r\n         ) : (\r\n"
                },
                {
                    "date": 1750348676962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,75 +1,89 @@\n import React from 'react';\r\n import { CalendarCheck, Clock } from 'lucide-react';\r\n+import { motion, AnimatePresence } from 'framer-motion';\r\n \r\n const DisponibilitesModal = ({ pro, disponibilites, genererSousCreneaux, onReserver, onPayer, onClose }) => {\r\n   return (\r\n-    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\r\n-      <div className=\"relative bg-white p-6 rounded-md max-w-3xl w-full max-h-[80vh] overflow-y-auto shadow-xl\">\r\n-        <button\r\n-          onClick={onClose}\r\n-          className=\"absolute top-3 right-3 text-gray-500 hover:text-red-600 text-lg font-bold\"\r\n+    <AnimatePresence>\r\n+      <motion.div\r\n+        initial={{ opacity: 0 }}\r\n+        animate={{ opacity: 1 }}\r\n+        exit={{ opacity: 0 }}\r\n+        className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\"\r\n+      >\r\n+        <motion.div\r\n+          initial={{ scale: 0.8, y: 50, opacity: 0 }}\r\n+          animate={{ scale: 1, y: 0, opacity: 1 }}\r\n+          exit={{ scale: 0.8, y: 50, opacity: 0 }}\r\n+          transition={{ duration: 0.3 }}\r\n+          className=\"relative bg-white p-6 rounded-md max-w-3xl w-full max-h-[80vh] overflow-y-auto shadow-xl\"\r\n         >\r\n-          ✖\r\n-        </button>\r\n+          <button\r\n+            onClick={onClose}\r\n+            className=\"absolute top-3 right-3 text-gray-500 hover:text-red-600 text-lg font-bold\"\r\n+          >\r\n+            ✖\r\n+          </button>\r\n \r\n-        <h3 className=\"text-2xl font-bold mb-4 text-center\">\r\n-          Créneaux pour {pro.prenom} {pro.nom}\r\n-        </h3>\r\n+          <h3 className=\"text-2xl font-bold mb-4 text-center\">\r\n+            Créneaux pour {pro?.prenom || '...'} {pro?.nom || ''}\r\n+          </h3>\r\n \r\n-        {disponibilites.length === 0 ? (\r\n-          <p className=\"text-gray-600 text-center\">Aucune disponibilité trouvée.</p>\r\n-        ) : (\r\n-          <ul className=\"space-y-4\">\r\n-            {disponibilites.map((dispo, idx) => {\r\n-              const sousCreneaux = genererSousCreneaux(dispo);\r\n-              const reservationsActives = dispo.reservations || [];\r\n+          {disponibilites.length === 0 ? (\r\n+            <p className=\"text-gray-600 text-center\">Aucune disponibilité trouvée.</p>\r\n+          ) : (\r\n+            <ul className=\"space-y-4\">\r\n+              {disponibilites.map((dispo, idx) => {\r\n+                const sousCreneaux = genererSousCreneaux(dispo);\r\n+                const reservationsActives = dispo.reservations || [];\r\n \r\n-              if (sousCreneaux.length === 0 && reservationsActives.length === 0) return null;\r\n+                if (sousCreneaux.length === 0 && reservationsActives.length === 0) return null;\r\n \r\n-              return (\r\n-                <li key={`${dispo.date}-${idx}`} className=\"border p-4 rounded-md shadow-md\">\r\n-                  <p className=\"font-medium mb-2\">\r\n-                    <CalendarCheck size={16} className=\"inline-block mr-1\" />\r\n-                    {new Date(dispo.date).toLocaleDateString()}\r\n-                  </p>\r\n-                  <p className=\"text-sm text-gray-700 mb-2\">\r\n-                    <Clock size={16} className=\"inline-block mr-1\" />\r\n-                    {dispo.heureDebut?.substring(0, 5)} - {dispo.heureFin?.substring(0, 5)}\r\n-                  </p>\r\n+                return (\r\n+                  <li key={`${dispo.date}-${idx}`} className=\"border p-4 rounded-md shadow-md\">\r\n+                    <p className=\"font-medium mb-2\">\r\n+                      <CalendarCheck size={16} className=\"inline-block mr-1\" />\r\n+                      {new Date(dispo.date).toLocaleDateString()}\r\n+                    </p>\r\n+                    <p className=\"text-sm text-gray-700 mb-2\">\r\n+                      <Clock size={16} className=\"inline-block mr-1\" />\r\n+                      {dispo.heureDebut?.substring(0, 5)} - {dispo.heureFin?.substring(0, 5)}\r\n+                    </p>\r\n \r\n-                  <div className=\"flex flex-wrap gap-2 mb-4\">\r\n-                    {sousCreneaux.map((heure, i) => (\r\n-                      <button\r\n-                        key={`libre-${i}`}\r\n-                        onClick={() => onReserver(dispo, heure)}\r\n-                        className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\"\r\n-                      >\r\n-                        Réserver à {heure}\r\n-                      </button>\r\n-                    ))}\r\n-                  </div>\r\n-\r\n-                  <div className=\"flex flex-wrap gap-2\">\r\n-                    {reservationsActives\r\n-                      .filter(resv => resv.statut === 'EN_ATTENTE_PAIEMENT')\r\n-                      .map((resv) => (\r\n+                    <div className=\"flex flex-wrap gap-2 mb-4\">\r\n+                      {sousCreneaux.map((heure, i) => (\r\n                         <button\r\n-                          key={`reserve-${resv.id}`}\r\n-                          onClick={() => onPayer(resv.id)}\r\n-                          className=\"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm\"\r\n+                          key={`libre-${i}`}\r\n+                          onClick={() => onReserver(dispo, heure)}\r\n+                          className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\"\r\n                         >\r\n-                          Payer la réservation\r\n+                          Réserver à {heure}\r\n                         </button>\r\n                       ))}\r\n-                  </div>\r\n-                </li>\r\n-              );\r\n-            })}\r\n-          </ul>\r\n-        )}\r\n-      </div>\r\n-    </div>\r\n+                    </div>\r\n+\r\n+                    <div className=\"flex flex-wrap gap-2\">\r\n+                      {reservationsActives\r\n+                        .filter(resv => resv.statut === 'EN_ATTENTE_PAIEMENT')\r\n+                        .map((resv) => (\r\n+                          <button\r\n+                            key={`reserve-${resv.id}`}\r\n+                            onClick={() => onPayer(resv.id)}\r\n+                            className=\"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm\"\r\n+                          >\r\n+                            Payer la réservation\r\n+                          </button>\r\n+                        ))}\r\n+                    </div>\r\n+                  </li>\r\n+                );\r\n+              })}\r\n+            </ul>\r\n+          )}\r\n+        </motion.div>\r\n+      </motion.div>\r\n+    </AnimatePresence>\r\n   );\r\n };\r\n \r\n export default DisponibilitesModal;\r\n"
                }
            ],
            "date": 1750347993723,
            "name": "Commit-0",
            "content": "// src/components/utilisateur/DisponibilitesModal.jsx\r\nimport React from 'react';\r\nimport { CalendarCheck, Clock } from 'lucide-react';\r\n\r\nconst DisponibilitesModal = ({ pro, disponibilites, genererSousCreneaux, onReserver, onPayer, onClose }) => {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\r\n      <div className=\"bg-white p-6 rounded-md max-w-3xl w-full max-h-[80vh] overflow-y-auto shadow-xl\">\r\n        <h3 className=\"text-2xl font-bold mb-4 text-center\">\r\n          Créneaux pour {pro.prenom} {pro.nom}\r\n        </h3>\r\n        <button onClick={onClose} className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-800\">\r\n          ✖\r\n        </button>\r\n\r\n        {disponibilites.length === 0 ? (\r\n          <p className=\"text-gray-600 text-center\">Aucune disponibilité trouvée.</p>\r\n        ) : (\r\n          <ul className=\"space-y-4\">\r\n            {disponibilites.map((dispo, idx) => {\r\n              const sousCreneaux = genererSousCreneaux(dispo);\r\n              const reservationsActives = dispo.reservations || [];\r\n\r\n              if (sousCreneaux.length === 0 && reservationsActives.length === 0) return null;\r\n\r\n              return (\r\n                <li key={`${dispo.date}-${idx}`} className=\"border p-4 rounded-md shadow-md\">\r\n                  <p className=\"font-medium mb-2\">\r\n                    <CalendarCheck size={16} className=\"inline-block mr-1\" />\r\n                    {new Date(dispo.date).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-700 mb-2\">\r\n                    <Clock size={16} className=\"inline-block mr-1\" />\r\n                    {dispo.heureDebut?.substring(0, 5)} - {dispo.heureFin?.substring(0, 5)}\r\n                  </p>\r\n\r\n                  <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                    {sousCreneaux.map((heure, i) => (\r\n                      <button\r\n                        key={`libre-${i}`}\r\n                        onClick={() => onReserver(dispo, heure)}\r\n                        className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\"\r\n                      >\r\n                        Réserver à {heure}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {reservationsActives\r\n                      .filter(resv => resv.statut === 'EN_ATTENTE_PAIEMENT')\r\n                      .map((resv) => (\r\n                        <button\r\n                          key={`reserve-${resv.id}`}\r\n                          onClick={() => onPayer(resv.id)}\r\n                          className=\"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm\"\r\n                        >\r\n                          Payer la réservation\r\n                        </button>\r\n                      ))}\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisponibilitesModal;\r\n"
        }
    ]
}
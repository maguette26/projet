{
    "sourceFile": "src/components/professionel/Consultations.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1750969086402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750971949048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,9 +66,9 @@\n       ) : consultationsFiltrees.length === 0 ? (\r\n         <p className=\"text-gray-500 dark:text-gray-400\">Aucune consultation pour ce filtre.</p>\r\n       ) : (\r\n         <table className=\"w-full table-auto border-collapse border border-gray-300 dark:border-gray-700\">\r\n-          <thead>\r\n+            <thead className=\"bg-blue-600\">\r\n             <tr className=\"bg-blue-100 dark:bg-blue-800 text-left\">\r\n               <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Date</th>\r\n               <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Heure</th>\r\n               <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Utilisateur</th>\r\n"
                },
                {
                    "date": 1750972009588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n   const [error, setError] = useState(null);\r\n \r\n   const fetchConsultations = async () => {\r\n     try {\r\n-      const data = await getConsultations(); // doit appeler /api/professionnels/mes-reservations\r\n+      const data = await getConsultations();\r\n       setConsultations(data);\r\n       setError(null);\r\n     } catch (e) {\r\n       console.error(\"Erreur lors du chargement :\", e);\r\n@@ -25,74 +25,99 @@\n     fetchConsultations();\r\n   }, []);\r\n \r\n   const consultationsFiltrees = consultations.filter(({ statut }) => {\r\n-    if (filtreStatut === 'TOUTES') return true;\r\n-    return statut === filtreStatut;\r\n+    return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n   });\r\n \r\n+  const formatHeure = (heure) => {\r\n+    if (!heure) return '';\r\n+    const [h, m] = heure.split(':');\r\n+    return `${h}h${m}`;\r\n+  };\r\n+\r\n+  const getStatutStyle = (statut) => {\r\n+    switch (statut) {\r\n+      case 'CONFIRMEE':\r\n+        return 'text-green-600 font-medium';\r\n+      case 'EN_ATTENTE':\r\n+        return 'text-yellow-600 font-medium';\r\n+      case 'TERMINEE':\r\n+        return 'text-gray-600 font-medium';\r\n+      default:\r\n+        return 'text-gray-500';\r\n+    }\r\n+  };\r\n+\r\n   return (\r\n     <div className=\"max-w-5xl mx-auto p-4\">\r\n-      <h2 className=\"text-2xl font-semibold text-blue-700 dark:text-blue-400 mb-4 flex items-center gap-2\">\r\n+      <h2 className=\"text-2xl font-semibold text-blue-700 mb-6 flex items-center gap-2\">\r\n         <CheckCircle size={24} /> Mes consultations\r\n       </h2>\r\n \r\n       {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n \r\n       {/* Filtre par statut */}\r\n-      <div className=\"mb-4 flex gap-3 flex-wrap\">\r\n+      <div className=\"mb-4 flex gap-2 flex-wrap\">\r\n         {['TOUTES', 'EN_ATTENTE', 'CONFIRMEE', 'TERMINEE'].map((statut) => (\r\n           <button\r\n             key={statut}\r\n             onClick={() => setFiltreStatut(statut)}\r\n-            className={`px-3 py-1 rounded-full border text-sm ${\r\n+            className={`px-3 py-1 rounded-full text-sm font-medium transition-all duration-150 ${\r\n               filtreStatut === statut\r\n-                ? 'bg-blue-600 text-white border-blue-600'\r\n-                : 'bg-white text-gray-700 border-gray-300'\r\n+                ? 'bg-blue-600 text-white shadow-md'\r\n+                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n             }`}\r\n           >\r\n             {statut === 'TOUTES'\r\n               ? 'Toutes'\r\n               : statut === 'EN_ATTENTE'\r\n               ? 'En attente'\r\n               : statut === 'CONFIRMEE'\r\n-              ? 'Confirmée'\r\n-              : 'Terminée'}\r\n+              ? 'Confirmées'\r\n+              : 'Terminées'}\r\n           </button>\r\n         ))}\r\n       </div>\r\n \r\n       {loading ? (\r\n-        <p className=\"text-blue-600 dark:text-blue-400\">Chargement...</p>\r\n+        <p className=\"text-blue-600\">Chargement...</p>\r\n       ) : consultationsFiltrees.length === 0 ? (\r\n-        <p className=\"text-gray-500 dark:text-gray-400\">Aucune consultation pour ce filtre.</p>\r\n+        <p className=\"text-gray-500\">Aucune consultation pour ce filtre.</p>\r\n       ) : (\r\n-        <table className=\"w-full table-auto border-collapse border border-gray-300 dark:border-gray-700\">\r\n\\ No newline at end of file\n+        <div className=\"overflow-x-auto rounded-lg shadow\">\r\n+          <table className=\"w-full border-collapse\">\r\n             <thead className=\"bg-blue-600\">\r\n-            <tr className=\"bg-blue-100 dark:bg-blue-800 text-left\">\r\n-              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Date</th>\r\n-              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Heure</th>\r\n-              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Utilisateur</th>\r\n-              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Statut</th>\r\n-            </tr>\r\n-          </thead>\r\n-          <tbody>\r\n-            {consultationsFiltrees.map(({ id, date, heure, utilisateurNom, utilisateurPrenom, statut }) => (\r\n-              <tr key={id} className=\"border-t border-gray-300 dark:border-gray-700\">\r\n-                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">{date}</td>\r\n-                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">{heure}</td>\r\n-                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">\r\n-                  {utilisateurPrenom} {utilisateurNom}\r\n-                </td>\r\n-                <td className=\"p-2 border border-gray-300 dark:border-gray-700 capitalize\">\r\n-                  {statut.toLowerCase()}\r\n-                </td>\r\n+              <tr>\r\n+                <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Date</th>\r\n+                <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Heure</th>\r\n+                <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Utilisateur</th>\r\n+                <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Statut</th>\r\n               </tr>\r\n-            ))}\r\n-          </tbody>\r\n-        </table>\r\n+            </thead>\r\n+            <tbody className=\"bg-white text-sm\">\r\n+              {consultationsFiltrees.map(({ id, date, heure, utilisateurNom, utilisateurPrenom, statut }, index) => (\r\n+                <tr\r\n+                  key={id}\r\n+                  className={`border-t transition-all duration-150 ${\r\n+                    index % 2 === 0 ? 'bg-blue-50/20' : 'bg-white'\r\n+                  } hover:bg-blue-50`}\r\n+                >\r\n+                  <td className=\"px-4 py-3 font-medium text-gray-800\">{date}</td>\r\n+                  <td className=\"px-4 py-3 font-medium text-gray-800\">{formatHeure(heure)}</td>\r\n+                  <td className=\"px-4 py-3 font-medium text-gray-800\">\r\n+                    {utilisateurPrenom} {utilisateurNom}\r\n+                  </td>\r\n+                  <td className={`px-4 py-3 capitalize ${getStatutStyle(statut)}`}>\r\n+                    {statut.toLowerCase()}\r\n+                  </td>\r\n+                </tr>\r\n+              ))}\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n       )}\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default Consultations;\n+export default Consultations;\r\n"
                },
                {
                    "date": 1750972061621,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,12 +29,14 @@\n     return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n   });\r\n \r\n   const formatHeure = (heure) => {\r\n-    if (!heure) return '';\r\n-    const [h, m] = heure.split(':');\r\n-    return `${h}h${m}`;\r\n-  };\r\n+  if (!heure || typeof heure !== 'string') return '';\r\n+  const [h, m] = heure.split(':');\r\n+  const heures = h?.padStart(2, '0') || '00';\r\n+  const minutes = m?.padStart(2, '0') || '00';\r\n+  return `${heures}h${minutes}`;\r\n+};\r\n \r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n"
                },
                {
                    "date": 1750972088364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,14 +30,13 @@\n   });\r\n \r\n   const formatHeure = (heure) => {\r\n   if (!heure || typeof heure !== 'string') return '';\r\n-  const [h, m] = heure.split(':');\r\n-  const heures = h?.padStart(2, '0') || '00';\r\n-  const minutes = m?.padStart(2, '0') || '00';\r\n-  return `${heures}h${minutes}`;\r\n+  const [h = '00', m = '00'] = heure.split(':');\r\n+  return `${h.padStart(2, '0')}h${m.padStart(2, '0')}`;\r\n };\r\n \r\n+\r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n         return 'text-green-600 font-medium';\r\n"
                },
                {
                    "date": 1750972216946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,14 +29,13 @@\n     return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n   });\r\n \r\n   const formatHeure = (heure) => {\r\n-  if (!heure || typeof heure !== 'string') return '';\r\n-  const [h = '00', m = '00'] = heure.split(':');\r\n-  return `${h.padStart(2, '0')}h${m.padStart(2, '0')}`;\r\n-};\r\n+    if (!heure) return '';\r\n+    const [h = '00', m = '00'] = heure.split(':');\r\n+    return `${h.padStart(2, '0')}h${m.padStart(2, '0')}`;\r\n+  };\r\n \r\n-\r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n         return 'text-green-600 font-medium';\r\n@@ -56,9 +55,9 @@\n       </h2>\r\n \r\n       {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n \r\n-      {/* Filtre par statut */}\r\n+      {/* Filtres */}\r\n       <div className=\"mb-4 flex gap-2 flex-wrap\">\r\n         {['TOUTES', 'EN_ATTENTE', 'CONFIRMEE', 'TERMINEE'].map((statut) => (\r\n           <button\r\n             key={statut}\r\n"
                },
                {
                    "date": 1750972256982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,14 +28,8 @@\n   const consultationsFiltrees = consultations.filter(({ statut }) => {\r\n     return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n   });\r\n \r\n-  const formatHeure = (heure) => {\r\n-    if (!heure) return '';\r\n-    const [h = '00', m = '00'] = heure.split(':');\r\n-    return `${h.padStart(2, '0')}h${m.padStart(2, '0')}`;\r\n-  };\r\n-\r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n         return 'text-green-600 font-medium';\r\n@@ -102,9 +96,9 @@\n                     index % 2 === 0 ? 'bg-blue-50/20' : 'bg-white'\r\n                   } hover:bg-blue-50`}\r\n                 >\r\n                   <td className=\"px-4 py-3 font-medium text-gray-800\">{date}</td>\r\n-                  <td className=\"px-4 py-3 font-medium text-gray-800\">{formatHeure(heure)}</td>\r\n+                  <td className=\"px-4 py-3 font-medium text-gray-800\">{heure}</td>\r\n                   <td className=\"px-4 py-3 font-medium text-gray-800\">\r\n                     {utilisateurPrenom} {utilisateurNom}\r\n                   </td>\r\n                   <td className={`px-4 py-3 capitalize ${getStatutStyle(statut)}`}>\r\n"
                },
                {
                    "date": 1750972348972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,11 +24,17 @@\n   useEffect(() => {\r\n     fetchConsultations();\r\n   }, []);\r\n \r\n-  const consultationsFiltrees = consultations.filter(({ statut }) => {\r\n-    return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n-  });\r\n+  const consultationsFiltrees = consultations\r\n+    .filter(({ statut }) => {\r\n+      return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n+    })\r\n+    .sort((a, b) => {\r\n+      const dateA = new Date(`${a.date}T${a.heure || '00:00'}`);\r\n+      const dateB = new Date(`${b.date}T${b.heure || '00:00'}`);\r\n+      return dateA - dateB;\r\n+    });\r\n \r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n"
                },
                {
                    "date": 1750972410934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,17 +24,23 @@\n   useEffect(() => {\r\n     fetchConsultations();\r\n   }, []);\r\n \r\n+  const parseDateTime = (dateStr, timeStr) => {\r\n+    try {\r\n+      return new Date(`${dateStr}T${timeStr || '00:00'}`);\r\n+    } catch {\r\n+      return new Date(0); // date invalide\r\n+    }\r\n+  };\r\n+\r\n   const consultationsFiltrees = consultations\r\n     .filter(({ statut }) => {\r\n       return filtreStatut === 'TOUTES' || statut === filtreStatut;\r\n     })\r\n-    .sort((a, b) => {\r\n-      const dateA = new Date(`${a.date}T${a.heure || '00:00'}`);\r\n-      const dateB = new Date(`${b.date}T${b.heure || '00:00'}`);\r\n-      return dateA - dateB;\r\n-    });\r\n+    .sort((a, b) =>\r\n+      parseDateTime(a.date, a.heure) - parseDateTime(b.date, b.heure)\r\n+    );\r\n \r\n   const getStatutStyle = (statut) => {\r\n     switch (statut) {\r\n       case 'CONFIRMEE':\r\n"
                },
                {
                    "date": 1750972789249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,13 +96,14 @@\n               <tr>\r\n                 <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Date</th>\r\n                 <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Heure</th>\r\n                 <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Utilisateur</th>\r\n+                <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Email</th> {/* Nouvelle colonne */}\r\n                 <th className=\"px-4 py-2 text-left text-sm font-semibold text-white\">Statut</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody className=\"bg-white text-sm\">\r\n-              {consultationsFiltrees.map(({ id, date, heure, utilisateurNom, utilisateurPrenom, statut }, index) => (\r\n+              {consultationsFiltrees.map(({ id, date, heure, utilisateurNom, utilisateurPrenom, utilisateurEmail, statut }, index) => (\r\n                 <tr\r\n                   key={id}\r\n                   className={`border-t transition-all duration-150 ${\r\n                     index % 2 === 0 ? 'bg-blue-50/20' : 'bg-white'\r\n@@ -112,8 +113,11 @@\n                   <td className=\"px-4 py-3 font-medium text-gray-800\">{heure}</td>\r\n                   <td className=\"px-4 py-3 font-medium text-gray-800\">\r\n                     {utilisateurPrenom} {utilisateurNom}\r\n                   </td>\r\n+                  <td className=\"px-4 py-3 font-medium text-gray-800\">\r\n+                    {utilisateurEmail || 'Email inconnu'}\r\n+                  </td>\r\n                   <td className={`px-4 py-3 capitalize ${getStatutStyle(statut)}`}>\r\n                     {statut.toLowerCase()}\r\n                   </td>\r\n                 </tr>\r\n"
                }
            ],
            "date": 1750969086402,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from 'react';\r\nimport { getConsultations } from '../../services/servicePsy';\r\nimport { CheckCircle } from 'lucide-react';\r\n\r\nconst Consultations = () => {\r\n  const [consultations, setConsultations] = useState([]);\r\n  const [filtreStatut, setFiltreStatut] = useState('TOUTES');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchConsultations = async () => {\r\n    try {\r\n      const data = await getConsultations(); // doit appeler /api/professionnels/mes-reservations\r\n      setConsultations(data);\r\n      setError(null);\r\n    } catch (e) {\r\n      console.error(\"Erreur lors du chargement :\", e);\r\n      setError(\"Erreur lors du chargement des consultations.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchConsultations();\r\n  }, []);\r\n\r\n  const consultationsFiltrees = consultations.filter(({ statut }) => {\r\n    if (filtreStatut === 'TOUTES') return true;\r\n    return statut === filtreStatut;\r\n  });\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto p-4\">\r\n      <h2 className=\"text-2xl font-semibold text-blue-700 dark:text-blue-400 mb-4 flex items-center gap-2\">\r\n        <CheckCircle size={24} /> Mes consultations\r\n      </h2>\r\n\r\n      {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n\r\n      {/* Filtre par statut */}\r\n      <div className=\"mb-4 flex gap-3 flex-wrap\">\r\n        {['TOUTES', 'EN_ATTENTE', 'CONFIRMEE', 'TERMINEE'].map((statut) => (\r\n          <button\r\n            key={statut}\r\n            onClick={() => setFiltreStatut(statut)}\r\n            className={`px-3 py-1 rounded-full border text-sm ${\r\n              filtreStatut === statut\r\n                ? 'bg-blue-600 text-white border-blue-600'\r\n                : 'bg-white text-gray-700 border-gray-300'\r\n            }`}\r\n          >\r\n            {statut === 'TOUTES'\r\n              ? 'Toutes'\r\n              : statut === 'EN_ATTENTE'\r\n              ? 'En attente'\r\n              : statut === 'CONFIRMEE'\r\n              ? 'Confirmée'\r\n              : 'Terminée'}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p className=\"text-blue-600 dark:text-blue-400\">Chargement...</p>\r\n      ) : consultationsFiltrees.length === 0 ? (\r\n        <p className=\"text-gray-500 dark:text-gray-400\">Aucune consultation pour ce filtre.</p>\r\n      ) : (\r\n        <table className=\"w-full table-auto border-collapse border border-gray-300 dark:border-gray-700\">\r\n          <thead>\r\n            <tr className=\"bg-blue-100 dark:bg-blue-800 text-left\">\r\n              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Date</th>\r\n              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Heure</th>\r\n              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Utilisateur</th>\r\n              <th className=\"p-2 border border-gray-300 dark:border-gray-700\">Statut</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {consultationsFiltrees.map(({ id, date, heure, utilisateurNom, utilisateurPrenom, statut }) => (\r\n              <tr key={id} className=\"border-t border-gray-300 dark:border-gray-700\">\r\n                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">{date}</td>\r\n                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">{heure}</td>\r\n                <td className=\"p-2 border border-gray-300 dark:border-gray-700\">\r\n                  {utilisateurPrenom} {utilisateurNom}\r\n                </td>\r\n                <td className=\"p-2 border border-gray-300 dark:border-gray-700 capitalize\">\r\n                  {statut.toLowerCase()}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Consultations;"
        }
    ]
}